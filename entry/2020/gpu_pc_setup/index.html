
<!DOCTYPE html>
<html lang="ja-JP">
<head>
  

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GPU PC (Desktop) のセットアップメモ - えやみぐさ</title>
  


<link rel="shortcut icon" href="../../../favicon.ico">




<meta property="og:url" content="https://blog.aoirint.com/entry/2020/gpu_pc_setup/" />
<meta property="og:locale" content="ja-JP" />
<meta property="og:type" content="article" />

<meta property="og:title" content="GPU PC (Desktop) のセットアップメモ - えやみぐさ" />

<meta name="description" content="GPU PC (Desktop) をセットアップする"/>
<meta property="og:description" content="GPU PC (Desktop) をセットアップする" />
<meta property="og:image" content="https://blog.aoirint.com/ogp.png" />
<meta property="article:published_time" content="2020-09-18T20:00:00+09:00" />

<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@aoirint">
<meta name="twitter:creator" content="@aoirint">


<link href="https://blog.aoirint.com/atom.xml" type="application/atom+xml" rel="alternate" title="えやみぐさ Atom Feed" />
<link href="https://blog.aoirint.com/rss.rdf" type="application/rss+xml" rel="alternate" title="えやみぐさ RSS Feed" />

<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../../../static/aoirint-blog/css/style.css">

<script defer src="../../../static/fontawesome/js/all.min.js"></script>
  <script defer src="../../../static/fontawesome/js/v4-shims.min.js"></script>
<link rel="stylesheet" href="../../../static/pygments/native.css">


    
  

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-157155944-5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-157155944-5');
  </script>
  

<script src="../../../static/aoirint-blog/js/main.js"></script>

<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>


</head>

<body>
  

<nav class="sitebar">
  <div class="sitebar-left">
    
    <a href="https://cse.google.com/cse?cx=4b57e8a4ef2a8c489" target="_blank" class="sitebar-button">
      <i class="fas fa-search"></i>
    </a>
    

    <a href="../../../atom.xml" title="RSS Feed" class="sitebar-button">
      <i class="fas fa-rss"></i>
    </a>

  <!--
    <a href="../../../atom.xml" title="Atom Feed" class="sitebar-button">
      <i class="fas fa-rss"></i>
    </a>
  -->

    
    <a href="https://twitter.com/aoirint" target="_blank" title="Twitter @aoirint" class="sitebar-button">
      <i class="fab fa-twitter"></i>
    </a>
    

    
    <a href="https://github.com/aoirint" target="_blank" title="GitHub @aoirint" class="sitebar-button">
      <i class="fab fa-github"></i>
    </a>
    
  </div>


  <div class="sitebar-center">
    <a href="../../../" class="sitebar-title">
      えやみぐさ
    </a>
    
    <div class="sitebar-description">
      Blog by aoirint
    </div>
    
  </div>

  <div class="sitebar-right">
    <button class="toggle-tocbar sitebar-button" type="button" onclick="toggleTocBarIfSmartphone();">
      <i class="fas fa-list"></i>
    </button>

  </div>

</nav>

<main class="main-content">

<div class="container">


<article class="article">


<div class="article-metadata">
  <div class="article-date">
    2020-09-18
  </div>

  <div class="article-tags">

    <a href="../../../category/Ubuntu/" class="article-category">
      Ubuntu
    </a>



    <a href="../../../tags/PC Setup/" class="article-tag">
      PC Setup
    </a>

  </div>

</div>



<div class="article-body">
  <h1 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_GPU_PC_Desktop_のセットアップメモ">GPU PC (Desktop) のセットアップメモ</h1>
<p><a href="https://releases.ubuntu.com/18.04.5/" title="Ubuntu 18.04.5 LTS (Bionic Beaver)">Ubuntu 18.04.5 LTS (Bionic Beaver)</a></p>
<p>Ubuntu 18.04、Windows 10のデュアルブート環境を構築する。
プロキシ下を想定しているので、不要な場合は適宜調整。</p>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_時刻ずれの解消">時刻ずれの解消</h2>
<p><a href="https://linux.just4fun.biz/?Linux%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A/%E3%83%87%E3%83%A5%E3%82%A2%E3%83%AB%E3%83%96%E3%83%BC%E3%83%88%E3%81%AEWindows%E6%99%82%E5%88%BB%E3%82%92UTC%E3%81%AB%E3%81%99%E3%82%8B" title="Linux環境設定/デュアルブートのWindows時刻をUTCにする - Linuxと過ごす">Linux環境設定/デュアルブートのWindows時刻をUTCにする - Linuxと過ごす</a></p>
<p>デュアルブート環境では、BIOSの時刻を介してWindows側の時刻管理（ローカル時間）とUbuntu側の時刻管理（UTC時間）が衝突して、タイムゾーンの時差分、時計がずれてしまう。ここでは、Windows側の時刻管理をUTC時間にするようにレジストリを変更して対処する。</p>
<p>Windows上で管理者権限でコマンドプロンプトを起動し、以下のコマンドを実行する。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>reg add "HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation" /v RealTimeIsUniversal /d 1 /t REG_DWORD /f
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_NTPサーバの設定_プロキシ環境_">NTPサーバの設定（プロキシ環境）</h2>
<ul>
<li><a href="https://sicklylife.hatenablog.com/entry/2016/02/03/201557" title="Ubuntu 18.04 / 16.04 で時刻合わせの設定を変更する - Sickly Life Blog">Ubuntu 18.04 / 16.04 で時刻合わせの設定を変更する - Sickly Life Blog</a></li>
<li><a href="https://yyatsuo.com/post-1297/" title="systemdのSNTPクライアント機能を使ってみる | Keep the Light Alive">systemdのSNTPクライアント機能を使ってみる | Keep the Light Alive</a></li>
<li><a href="https://go-journey.club/archives/9491" title="【Windows】「ハードウェアクロック」と「システムクロック」と「NTP 時刻同期」の関係 | 100%レンタルサーバーを使いこなすサイト">【Windows】「ハードウェアクロック」と「システムクロック」と「NTP 時刻同期」の関係 | 100%レンタルサーバーを使いこなすサイト</a></li>
</ul>
<p>時刻同期のためプロキシ内のNTPサーバを設定する。</p>
<p>Settings &gt; Details &gt; Date &amp; Timeで使われるNTPサービスは<code>systemd-timesyncd</code>。</p>
<p>設定ファイルの<code>/etc/systemd/timesyncd.conf</code>を開いて編集する。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>[Time]
NTP=YOUR_NTP_SERVER
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo systemctl restart systemd-timesyncd
</code></pre></div>
</td></tr></table>
<p>これで時刻が同期される。</p>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_プロキシの設定_1_Environment_Variable_apt">プロキシの設定 (1) Environment Variable, apt</h2>
<p>Settings &gt; Networkからプロキシを設定する。設定した内容は<code>HTTP_PROXY</code>などの環境変数に出力される。スキーム部分は不要（OS側で付けるので二重プロトコルになってしまう）。</p>
<p>また/etc/apt/apt.confを作成し、プロキシ設定を追記する</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>Acquire::http::proxy "http://YOUR_HTTP_PROXY";
Acquire::https::proxy "http://YOUR_HTTP_PROXY";
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_Package_Indexの更新とPackageの更新">Package Indexの更新とPackageの更新</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo apt update
sudo apt upgrade -y
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_git_ビルドツールほかのインストール">git、ビルドツールほかのインストール</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo apt install -y <span class="se">\</span>
  git <span class="se">\</span>
  build-essential <span class="se">\</span>
  make <span class="se">\</span>
  cmake <span class="se">\</span>
  vim
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>git config --global core.editor vim
git config --global credential.helper cache
git config --global user.name YOUR_NAME
git config --global user.email YOUR_EMAIL
</code></pre></div>
</td></tr></table>
<p>~/.vimrc</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">set</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">expandtab</span>
<span class="c">"set number</span>
<span class="k">set</span> <span class="nb">cursorline</span>
<span class="k">set</span> <span class="nb">smartindent</span>
<span class="k">set</span> <span class="nb">laststatus</span><span class="p">=</span><span class="m">2</span>
<span class="nb">syntax</span> enable

<span class="k">set</span> <span class="nb">hlsearch</span>
nmap <span class="p">&lt;</span>Esc<span class="p">&gt;&lt;</span>Esc<span class="p">&gt;</span> :<span class="k">nohlsearch</span><span class="p">&lt;</span>CR<span class="p">&gt;&lt;</span>Esc<span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_日本語IME_ibus_mozc_言語サポートのインストール">日本語IME（ibus-mozc）、言語サポートのインストール</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo apt install -y ibus-mozc

ibus restart
gsettings <span class="nb">set</span> org.gnome.desktop.input-sources sources <span class="s2">"[('ibus', 'mozc-jp'), ('xkb', 'jp')]"</span>
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo apt install -y <span class="k">$(</span>check-language-support<span class="k">)</span>
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_プロキシの設定_2_git">プロキシの設定 (2) git</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>git config --global http.proxy <span class="si">${</span><span class="nv">HTTP_PROXY</span><span class="si">}</span>
git config --global https.proxy <span class="si">${</span><span class="nv">HTTPS_PROXY</span><span class="si">}</span>
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_pyenv_Pythonのインストール">pyenv、Pythonのインストール</h2>
<p><a href="https://github.com/pyenv/pyenv#basic-github-checkout">pyenv/pyenv: Simple Python version management</a></p>
<p>新しいPythonを使うため、それからシステムと開発環境を分離してモジュール管理をaptとpipで分けて衝突事故を起こさないようにするため、pyenvを使うのが安定。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>git clone https://github.com/pyenv/pyenv.git ~/.pyenv

<span class="nb">echo</span> <span class="s1">'export PYENV_ROOT="$HOME/.pyenv"'</span> &gt;&gt; ~/.bashrc
<span class="nb">echo</span> <span class="s1">'export PATH="$PYENV_ROOT/bin:$PATH"'</span> &gt;&gt; ~/.bashrc

<span class="nb">echo</span> -e <span class="s1">'if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then\n  eval "$(pyenv init -)"\nfi'</span> &gt;&gt; ~/.bashrc

<span class="nb">source</span> ~/.bashrc
</code></pre></div>
</td></tr></table>
<ul>
<li><a href="https://github.com/pyenv/pyenv/wiki/common-build-problems" title="Common build problems · pyenv/pyenv Wiki">Common build problems · pyenv/pyenv Wiki</a></li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo apt install -y <span class="se">\</span>
  libssl-dev <span class="se">\</span>
  zlib1g-dev <span class="se">\</span>
  libbz2-dev <span class="se">\</span>
  libreadline-dev <span class="se">\</span>
  libsqlite3-dev <span class="se">\</span>
  wget <span class="se">\</span>
  curl <span class="se">\</span>
  llvm <span class="se">\</span>
  libncurses5-dev <span class="se">\</span>
  libncursesw5-dev <span class="se">\</span>
  xz-utils <span class="se">\</span>
  tk-dev <span class="se">\</span>
  libffi-dev <span class="se">\</span>
  liblzma-dev <span class="se">\</span>
  python-openssl

pyenv install <span class="m">3</span>.8.5
pyenv global <span class="m">3</span>.8.5
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_Docker_Docker_Composeのインストール">Docker &amp; Docker Composeのインストール</h2>
<p><a href="https://docs.docker.com/engine/install/ubuntu/" title="Install Docker Engine on Ubuntu | Docker Documentation">Install Docker Engine on Ubuntu | Docker Documentation</a></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo apt remove docker docker-engine docker.io containerd runc
sudo apt update
sudo apt install -y <span class="se">\</span>
    apt-transport-https <span class="se">\</span>
    ca-certificates <span class="se">\</span>
    curl <span class="se">\</span>
    gnupg-agent <span class="se">\</span>
    software-properties-common

curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="se">\</span>
  -x <span class="s2">"</span><span class="si">${</span><span class="nv">HTTP_PROXY</span><span class="si">}</span><span class="s2">"</span> <span class="se">\</span>
  <span class="p">|</span> sudo apt-key add -
sudo apt-key fingerprint 0EBFCD88

sudo add-apt-repository <span class="se">\</span>
   <span class="s2">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span>
<span class="s2">   </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> \</span>
<span class="s2">   stable"</span>
sudo apt update

sudo apt install -y docker-ce docker-ce-cli containerd.io
</code></pre></div>
</td></tr></table>
<p><a href="https://docs.docker.com/compose/install/" title="Install Docker Compose | Docker Documentation">Install Docker Compose | Docker Documentation</a></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo curl -L <span class="s2">"https://github.com/docker/compose/releases/download/1.27.3/docker-compose-</span><span class="k">$(</span>uname -s<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname -m<span class="k">)</span><span class="s2">"</span> <span class="se">\</span>
  -o /usr/local/bin/docker-compose <span class="se">\</span>
  -x <span class="s2">"</span><span class="si">${</span><span class="nv">HTTP_PROXY</span><span class="si">}</span><span class="s2">"</span>
sudo chmod +x /usr/local/bin/docker-compose
</code></pre></div>
</td></tr></table>
<p>一応、sudoせずにdockerを実行できるようにしておく。
注意として、共有サーバにおいては特権昇格できてしまうため、Docker 20.10以降のDocker rootlessを設定する。</p>
<ul>
<li><a href="https://docs.docker.com/engine/security/rootless/">https://docs.docker.com/engine/security/rootless/</a></li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo groupadd docker
sudo adduser <span class="nv">$USER</span> docker
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_プロキシの設定_3_Docker">プロキシの設定 (3) Docker</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo systemctl edit docker
</code></pre></div>
</td></tr></table>
<p>このコマンドで開いたファイルに以下を追記する。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>[Service]
Environment="HTTP_PROXY=YOUR_HTTP_PROXY"
Environment="HTTPS_PROXY=YOUR_HTTP_PROXY"
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo systemctl restart docker

docker pull hello-world
docker run --rm hello-world
</code></pre></div>
</td></tr></table>
<p>正常に実行されればOK。</p>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_CUDA_NVIDIA_Driverのインストール">CUDA &amp; NVIDIA Driverのインストール</h2>
<p><a href="https://pytorch.org/get-started/locally/" title="Start Locally | PyTorch">Start Locally | PyTorch</a></p>
<p>PyTorchの対応バージョンを見ながらCUDA Toolkitをインストールする。</p>
<p><a href="https://developer.nvidia.com/cuda-10.2-download-archive" title="CUDA Toolkit 10.2 Download | NVIDIA Developer">CUDA Toolkit 10.2 Download | NVIDIA Developer</a></p>
<p>~~CUDA Installerのrunfileを使って、runfileに同梱されているNVIDIA Driverを同時に入れるのが安定（2.5GBくらいで結構重いが）。~~</p>
<p>追記（2021/01/04）：カーネルアップデートのたびに再インストールする必要が出てくるので、ドライバについてはDKMSが使える通常のNVIDIA Driverインストールをした方がいい。
適切にPATH、LD_LIBRARY_PATHを設定すれば問題ない。</p>
<p><a href="https://developer.nvidia.com/cuda-10.2-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1804&amp;target_type=runfilelocal">Download runfile installer for Ubuntu 18.04</a></p>
<p>CUIモードでないとインストールに失敗するので、ダウンロードが終わったら一度デスクトップからログアウトし、Ctrl+Alt+F2などでCUIモードにする。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo systemctl stop gdm
<span class="c1"># sudo systemctl stop lightdm # for Ubuntu 16.04</span>
</code></pre></div>
</td></tr></table>
<p>これでデスクトップマネージャを止めてからインストールを始める（再起動してGUIモードでログインせずにCUIモードにして実行でもいけるかも）。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>wget http://developer.download.nvidia.com/compute/cuda/10.2/Prod/local_installers/cuda_10.2.89_440.33.01_linux.run
sudo sh cuda_10.2.89_440.33.01_linux.run
</code></pre></div>
</td></tr></table>
<p>~/.bashrcに以下を追記する。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div>
</td></tr></table>
<p>PyTorchが入ったあと（どちらを先にいれてもいい）、</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">torch</span>
<span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
<p>でTrueが返ってくればOK。</p>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_OpenCV_Python_Numpy_PyTorchほかのインストール">OpenCV-Python, Numpy, PyTorchほかのインストール</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip3 install -U pip
pip3 install -U <span class="se">\</span>
  opencv-python <span class="se">\</span>
  numpy <span class="se">\</span>
  Pillow <span class="se">\</span>
  --proxy <span class="s2">"</span><span class="si">${</span><span class="nv">HTTP_PROXY</span><span class="si">}</span><span class="s2">"</span>
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip3 install -U <span class="se">\</span>
  torch <span class="se">\</span>
  torchvision <span class="se">\</span>
  torchtext <span class="se">\</span>
  torchaudio <span class="se">\</span>
  --proxy <span class="s2">"</span><span class="si">${</span><span class="nv">HTTP_PROXY</span><span class="si">}</span><span class="s2">"</span>
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip3 install -U <span class="se">\</span>
  matplotlib <span class="se">\</span>
  tqdm <span class="se">\</span>
  jupyter <span class="se">\</span>
  PyYAML <span class="se">\</span>
  tensorboardX <span class="se">\</span>
  --proxy <span class="s2">"</span><span class="si">${</span><span class="nv">HTTP_PROXY</span><span class="si">}</span><span class="s2">"</span>
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_SSH_Serverほかのインストール">SSH Serverほかのインストール</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo apt install -y openssh-server net-tools
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ifconfig
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo vim /etc/ssh/sshd_config
</code></pre></div>
</td></tr></table>
<p>必要に応じてパスワード認証を無効にする。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>PasswordAuthentication no
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_ownCloudのインストール">ownCloudのインストール</h2>
<p><a href="https://software.opensuse.org/download/package?project=isv:ownCloud:desktop&amp;package=owncloud-client" title="Install package isv:ownCloud:desktop / owncloud-client">Install package isv:ownCloud:desktop / owncloud-client</a></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="s1">'deb http://download.opensuse.org/repositories/isv:/ownCloud:/desktop/Ubuntu_18.04/ /'</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/isv:ownCloud:desktop.list
curl -fsSL https://download.opensuse.org/repositories/isv:ownCloud:desktop/Ubuntu_18.04/Release.key <span class="p">|</span> gpg --dearmor <span class="p">|</span> sudo tee /etc/apt/trusted.gpg.d/isv:ownCloud:desktop.gpg &gt; /dev/null
sudo apt update
sudo apt install owncloud-client
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_その他のインストール">その他のインストール</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ssh-keygen -f KEYNAME
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sudo apt install tmux autossh
</code></pre></div>
</td></tr></table>
<h2 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_おまけ">おまけ</h2>
<h3 class="md_header_block" id="h_entry_2020_gpu_pc_setup_index_md_sshのプロキシ設定">sshのプロキシ設定</h3>
<ul>
<li><a href="https://qiita.com/yuyhiraka/items/30766c69fb605fc5f182" title="Mac OSXでHTTP Proxy経由でSSH - Qiita">Mac OSXでHTTP Proxy経由でSSH - Qiita</a></li>
<li><a href="https://qiita.com/_N4H4/items/d48ba7c728f2e1ebd159" title="【GitHub】Windows10+プロキシ環境でSSH接続を試みた話 - Qiita">【GitHub】Windows10+プロキシ環境でSSH接続を試みた話 - Qiita</a></li>
<li><a href="https://gist.github.com/rurban/360940" title="connect.c">gist:rurban/connect.c</a><ul>
<li><a href="https://gist.github.com/aoirint/ed94d828c4903d3fe410649fb41e2a4b" title="connect.c">ミラー: connect.c</a></li>
</ul>
</li>
</ul>
<p>~/.ssh/configの<code>Host</code>の下に書く。Windowsの場合は<code>connect</code>をビルドする必要がある。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    # Linux
    ProxyCommand nc -X connect -x YOUR_HTTP_PROXY %h %p

    # Windows
    ProxyCommand MY_APP_DIRECTORY\connect\connect.exe -H YOUR_HTTP_PROXY %h %p

    # Mac
    ProxyCommand ncat --proxy-type http --proxy YOUR_HTTP_PROXY %h %p
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code># for build `connect.c` on Windows
gcc -o connect -lwsock32 connect.c -lws2_32
</code></pre></div>
</td></tr></table>
</div>

</article>


</div>

</main>

<aside class="tocbar-box">
  <nav class="tocbar fixed-scrollable">

<div class="toc-box">
  <h4><a href="./" style="color: inherit; text-decoration: none;">Table of Contents</a></h4>
  <ul class="toc">
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_GPU_PC_Desktop_のセットアップメモ" class="toc-item toc-item-h1">
        GPU PC (Desktop) のセットアップメモ
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_時刻ずれの解消" class="toc-item toc-item-h2">
        時刻ずれの解消
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_NTPサーバの設定_プロキシ環境_" class="toc-item toc-item-h2">
        NTPサーバの設定（プロキシ環境）
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_プロキシの設定_1_Environment_Variable_apt" class="toc-item toc-item-h2">
        プロキシの設定 (1) Environment Variable, apt
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_Package_Indexの更新とPackageの更新" class="toc-item toc-item-h2">
        Package Indexの更新とPackageの更新
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_git_ビルドツールほかのインストール" class="toc-item toc-item-h2">
        git、ビルドツールほかのインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_日本語IME_ibus_mozc_言語サポートのインストール" class="toc-item toc-item-h2">
        日本語IME（ibus-mozc）、言語サポートのインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_プロキシの設定_2_git" class="toc-item toc-item-h2">
        プロキシの設定 (2) git
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_pyenv_Pythonのインストール" class="toc-item toc-item-h2">
        pyenv、Pythonのインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_Docker_Docker_Composeのインストール" class="toc-item toc-item-h2">
        Docker &amp; Docker Composeのインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_プロキシの設定_3_Docker" class="toc-item toc-item-h2">
        プロキシの設定 (3) Docker
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_CUDA_NVIDIA_Driverのインストール" class="toc-item toc-item-h2">
        CUDA &amp; NVIDIA Driverのインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_OpenCV_Python_Numpy_PyTorchほかのインストール" class="toc-item toc-item-h2">
        OpenCV-Python, Numpy, PyTorchほかのインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_SSH_Serverほかのインストール" class="toc-item toc-item-h2">
        SSH Serverほかのインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_ownCloudのインストール" class="toc-item toc-item-h2">
        ownCloudのインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_その他のインストール" class="toc-item toc-item-h2">
        その他のインストール
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_おまけ" class="toc-item toc-item-h2">
        おまけ
      </a>
  
    <li>
      <a href="#h_entry_2020_gpu_pc_setup_index_md_sshのプロキシ設定" class="toc-item toc-item-h3">
        sshのプロキシ設定
      </a>
  
  </ul>

</div>


  </nav>
</aside>

<footer class="footer">

  <p class="copyright-text">
    Copyright © 2020- aoirint.

  <p class="theme-text">
    Theme
    <a href="https://github.com/aoirint/aoirint-miyadaiku-theme-blog">aoirint-miyadaiku-theme-blog</a>.
  <p class="poweredby-text">
    Powered by
    <a href="https://github.com/miyadaiku/miyadaiku">Miyadaiku</a>.
</footer>


</body>
</html>