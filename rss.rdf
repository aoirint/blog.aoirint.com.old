<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>えやみぐさ</title><link>https://blog.aoirint.com/</link><description></description><lastBuildDate>Thu, 01 Jul 2021 13:00:00 +0900</lastBuildDate><item><title>Makefile Tips</title><link>https://blog.aoirint.com/entry/2021/makefile_tips/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_makefile_tips_index_md_Makefile_Tips"&gt;Makefile Tips&lt;/h1&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_makefile_tips_index_md_Makefileのあるディレクトリの絶対パスを取得する"&gt;Makefileのあるディレクトリの絶対パスを取得する&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;$(pwd)&lt;/code&gt;や相対パスでは、&lt;code&gt;make&lt;/code&gt;コマンドの実行ディレクトリが基準になってしまう。&lt;code&gt;Makefile&lt;/code&gt;の実体があるディレクトリを基準としたいときは、以下のようにROOT_DIRを定義する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;ROOT_DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;dir &lt;span class="k"&gt;$(&lt;/span&gt;realpath &lt;span class="k"&gt;$(&lt;/span&gt;firstword &lt;span class="k"&gt;$(&lt;/span&gt;MAKEFILE_LIST&lt;span class="k"&gt;))))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_makefile_tips_index_md_エラー時に処理を続行する"&gt;エラー時に処理を続行する&lt;/h2&gt;
&lt;p&gt;コマンドの前に&lt;code&gt;-&lt;/code&gt;（ハイフン）をつける。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nf"&gt;.PHONY&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt;
&lt;span class="nf"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    ls
    -fail_command a b c
    ls
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_makefile_tips_index_md_インデントはスペースではなくタブを使う"&gt;インデント&lt;/h2&gt;</description><pubDate>Thu, 01 Jul 2021 13:00:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-07-01 13:00:00.000000:/entry/2021/makefile_tips/</guid></item><item><title>Atom Text Editor Setup</title><link>https://blog.aoirint.com/entry/2021/atom_setup/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_atom_setup_index_md_Atom_Text_Editor_Setup"&gt;Atom Text Editor Setup&lt;/h1&gt;
&lt;p&gt;GitHubが開発するElectron製高機能テキストエディタAtomをセットアップする。&lt;/p&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_atom_setup_index_md_Installation"&gt;Installation&lt;/h2&gt;
&lt;h3 class="md_header_block" id="h_entry_2021_atom_setup_index_md_macOS_Windows"&gt;macOS, Windows&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://atom.io/"&gt;https://atom.io/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 class="md_header_block" id="h_entry_2021_atom_setup_index_md_Ubuntu"&gt;Ubuntu&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://flight-manual.atom.io/getting-started/sections/installing-atom/#platform-linux"&gt;https://flight-manual.atom.io/getting-started/sections/installing-atom/#platform-linux&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;wget -qO - https://packagecloud.io/AtomEditor/atom/gpgkey &lt;span class="p"&gt;|&lt;/span&gt; sudo&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description><pubDate>Fri, 14 May 2021 01:00:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-05-14 01:00:00.000000:/entry/2021/atom_setup/</guid></item><item><title>Ubuntu プロキシ設定</title><link>https://blog.aoirint.com/entry/2020/ubuntu_proxy/</link><description>&lt;h1 class="md_header_block" id="h_entry_2020_ubuntu_proxy_index_md_Ubuntu_プロキシ設定"&gt;Ubuntu プロキシ設定&lt;/h1&gt;
&lt;h2 class="md_header_block" id="h_entry_2020_ubuntu_proxy_index_md_User_Desktop_"&gt;User (Desktop)&lt;/h2&gt;
&lt;p&gt;Settings &amp;gt; Network &amp;gt; Network Proxy &amp;gt; Manualに設定する。
自動的に環境変数HTTP_PROXY, HTTPS_PROXYにスキームが追加された状態で設定される。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTP Proxy: &lt;code&gt;proxy&lt;/code&gt; &lt;code&gt;port&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;HTTPS Proxy: &lt;code&gt;proxy&lt;/code&gt; &lt;code&gt;port&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Ignore Hosts: &lt;code&gt;localhost, 127.0.0.0/8, ::1&lt;/code&gt;（プライベートネットワーク・組織内ネットワークのIPアドレス範囲またはドメインも追加する）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;curlやwget、pipなど主要コ&lt;/p&gt;</description><pubDate>Fri, 02 Oct 2020 15:40:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2020-10-02 15:40:00.000000:/entry/2020/ubuntu_proxy/</guid></item><item><title>透過プロキシ（macOS, go-transproxy）</title><link>https://blog.aoirint.com/entry/2021/transproxy_macos/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_transproxy_macos_index_md_透過プロキシ_macOS_"&gt;透過プロキシ（macOS）&lt;/h1&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_transproxy_macos_index_md_環境変数"&gt;環境変数&lt;/h2&gt;
&lt;p&gt;シェル起動時にネットワーク設定からプロキシ設定を環境変数に読み出すようにしている場合、GUIで設定すればOK。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HTTP_PROXY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://proxy.example.com:8080/
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HTTPS_PROXY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://proxy.example.com:8080/
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;NO_PROXY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;localhost,127.0.0.0/8,::1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NO_PROXYには必ずlocalhost/ローカルループバックアドレスを設定しておくこと（無限ル&lt;/p&gt;</description><pubDate>Mon, 21 Jun 2021 18:40:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-06-21 18:40:00.000000:/entry/2021/transproxy_macos/</guid></item><item><title>透過プロキシ（Ubuntu, go-transproxy）</title><link>https://blog.aoirint.com/entry/2021/transproxy_ubuntu/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_transproxy_ubuntu_index_md_透過プロキシ_Ubuntu_go_transproxy_"&gt;透過プロキシ（Ubuntu, go-transproxy）&lt;/h1&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_transproxy_ubuntu_index_md__etc_sudoers"&gt;/etc/sudoers&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Defaults        env_keep+="HTTP_PROXY"
Defaults        env_keep+="HTTPS_PROXY"
Defaults        env_keep+="NO_PROXY"
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_transproxy_ubuntu_index_md_環境変数"&gt;環境変数&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HTTP_PROXY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://proxy.example.com:8080/
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HTTPS_PROXY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://proxy.example.com:8080/
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;NO_PROXY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;localhost,127&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description><pubDate>Mon, 21 Jun 2021 18:10:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-06-21 18:10:00.000000:/entry/2021/transproxy_ubuntu/</guid></item><item><title>bind9</title><link>https://blog.aoirint.com/entry/2021/bind9/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_bind9_index_md_bind9"&gt;bind9&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;server$ sudo apt install bind9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_bind9_index_md_使用中のDNSサーバの確認"&gt;使用中のDNSサーバの確認&lt;/h2&gt;
&lt;p&gt;クライアントに設定されているDNSサーバは&lt;code&gt;nmcli&lt;/code&gt;コマンドで確認できる。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ nmcli device show &lt;span class="p"&gt;|&lt;/span&gt; grep DNS
IP4.DNS&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;:                             &lt;span class="m"&gt;8&lt;/span&gt;.8.8.8
IP4.DNS&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;:                             &lt;span class="m"&gt;8&lt;/span&gt;.8.4.4
IP4.DNS&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;:                             &lt;span class="m"&gt;1&lt;/span&gt;.1.1.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://askubuntu.com/questions/152593/command-line-to-list-dns-servers-used-by-my-system"&gt;Command-line to list DNS servers used by my system - Ask Ubuntu&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_bind9_index_md_用語"&gt;用語&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://cos.linux-dvr.biz/archives/category/bind-dns%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E6%A7%8B%E7%AF%89"&gt;BIND DNSサーバー構築 | CentOSサーバー構築入門&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 class="md_header_block" id="h_entry_2021_bind9_index_md_コンテンツサーバ_権威サーバ_"&gt;コンテンツサーバ（権威サーバ）&lt;/h3&gt;</description><pubDate>Wed, 09 Jun 2021 01:30:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-06-09 01:30:00.000000:/entry/2021/bind9/</guid></item><item><title>npm startで構文エラーが消えないときの対処</title><link>https://blog.aoirint.com/entry/2021/npm_start_reset_cache/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_npm_start_reset_cache_index_md_npm_startで構文エラーが消えないときの対処"&gt;npm startで構文エラーが消えないときの対処&lt;/h1&gt;
&lt;p&gt;npm startで構文エラーが消えなくなることがある。&lt;/p&gt;
&lt;p&gt;npm startでサーバを起動してコードの変更を監視したままの状態で、gitでブランチを切り替えたときキャッシュが正しく更新されないことが原因と思われる。&lt;/p&gt;
&lt;p&gt;キャッシュを破棄するには、&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;npm start -- --reset-cache
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;依存関係が変わっているとエラーの原因になるので、モジュールもインストールし直すのがよい。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;npm ci
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qiita.com/kt3k/items/758c4f3595ffd7e74f9f"&gt;https://qiita.com/kt3k/items/758c4f3595ffd7&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</description><pubDate>Sat, 05 Jun 2021 01:30:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-06-05 01:30:00.000000:/entry/2021/npm_start_reset_cache/</guid></item><item><title>npm startでError: ENOENT: no such file or directory ... .steampathで起動しないときの対処</title><link>https://blog.aoirint.com/entry/2021/npm_start_enoent_steampath/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_npm_start_enoent_steampath_index_md_npm_startでError_ENOENT_no_such_file_or_directory_steampathで起動しないときの対処"&gt;npm startでError: ENOENT: no such file or directory ... .steampathで起動しないときの対処&lt;/h1&gt;
&lt;p&gt;gitでブランチを切り替えて依存関係に差分が生じたとき、
node_modulesを修正していないときに起きる。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Error: ENOENT: no such file or directory, stat '/home/USER/.steampath'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;package-lock.jsonがあれば、
package-lock.jsonに基づいて依存関係をインストールする&lt;code&gt;npm ci&lt;/code&gt;を実行する。&lt;/p&gt;
&lt;p&gt;実行時に&lt;/p&gt;</description><pubDate>Sat, 05 Jun 2021 01:30:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-06-05 01:30:00.000000:/entry/2021/npm_start_enoent_steampath/</guid></item><item><title>Wiki.jsのセットアップ</title><link>https://blog.aoirint.com/entry/2021/wikijs/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_wikijs_index_md_Wiki_jsのセットアップ"&gt;Wiki.jsのセットアップ&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://js.wiki/get-started"&gt;https://js.wiki/get-started&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gigazine.net/news/20201003-wiki-js/"&gt;無料とは思えない多機能っぷりなWikiインフラ「Wiki.js」レビュー、自前でホスト＆外部サービスと連携可能 - GIGAZINE&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_wikijs_index_md_メモリ消費量"&gt;メモリ消費量&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ docker stats
CONTAINER ID   NAME            CPU %     MEM USAGE / LIMIT     MEM %     NET I/O           BLOCK I/O         PIDS
e225b6b77209   wikijs_wiki_1   &lt;span class="m"&gt;0&lt;/span&gt;.01%     &lt;span class="m"&gt;127&lt;/span&gt;.6MiB / &lt;span class="m"&gt;7&lt;/span&gt;.681GiB   &lt;span class="m"&gt;1&lt;/span&gt;.62%     &lt;span class="m"&gt;13&lt;/span&gt;.1MB / &lt;span class="m"&gt;22&lt;/span&gt;.7MB   &lt;span class="m"&gt;44&lt;/span&gt;.5MB / &lt;span class="m"&gt;1&lt;/span&gt;.45MB&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description><pubDate>Tue, 01 Jun 2021 05:00:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-06-01 05:00:00.000000:/entry/2021/wikijs/</guid></item><item><title>GitLab CI, DockerイメージをビルドしてContainer Registryにpushする</title><link>https://blog.aoirint.com/entry/2021/gitlab_ci_docker_registry/</link><description>&lt;h1 class="md_header_block" id="h_entry_2021_gitlab_ci_docker_registry_index_md_GitLab_CI_DockerイメージをビルドしてContainer_Registryにpushする"&gt;GitLab CI, DockerイメージをビルドしてContainer Registryにpushする&lt;/h1&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_gitlab_ci_docker_registry_index_md_リポジトリ構造"&gt;リポジトリ構造&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;.gitlab-ci.yml&lt;/li&gt;
&lt;li&gt;app/&lt;ul&gt;
&lt;li&gt;Dockerfile&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 class="md_header_block" id="h_entry_2021_gitlab_ci_docker_registry_index_md__gitlab_ci_yml"&gt;.gitlab-ci.yml&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;stages&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;build&lt;/span&gt;

&lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;stage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;build&lt;/span&gt;
  &lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;docker:20.10&lt;/span&gt;
  &lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;docker:dind&lt;/span&gt;
  &lt;span class="nt"&gt;rules&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;$CI_COMMIT_BRANCH == "main"&lt;/span&gt;
  &lt;span class="nt"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_P&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description><pubDate>Sat, 29 May 2021 02:00:00 +0900</pubDate><guid isPermaLink="false">tag:blog.aoirint.com,2021-05-29 02:00:00.000000:/entry/2021/gitlab_ci_docker_registry/</guid></item></channel></rss>